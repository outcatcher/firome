# Firome

Утилита, позволяющая добавить к данным вело тренировки маршрут,
выгруженный из стороннего источника, например, Strava Routes или Komoot.

Точки маршрута привязываются к тренировке по расстоянию от начала пути.

Автоматически исправляет неверные временные метки в файле активности.

## Использование

[Пример результата](https://www.strava.com/activities/11471378450)

### Консоль

```shell
> firome --route test/2024-05-21_1597851131.gpx --recording test/40B032FC.fit

route: /home/akachurin/Downloads/13.06.25.gpx
recording: /home/akachurin/Downloads/42AE8F03.fit.zip
found 16 broken timestamps in activity

result: 1750283535.tcx
```

### GUI

```shell
firome-ui
```
![image](https://github.com/outcatcher/firome/assets/8591561/f031bbf0-9c73-48eb-a227-9cda170eed6b)


После выбора исходных файлов и нажатия на кнопку `OK` открывается диалог выбора места экспорта.

_Язык приложения зависит от языка системы_

## Данные

### Поддерживаемые файлы

#### Активность:

- FIT, в том числе, в ZIP архиве: `*.fit`, `*.fit.zip`

#### Маршрут:

- GPX: `*.gpx`

### Ограничения для архивов

- Должен быть ZIP архивом
- Должен содержать один файл с активностью/маршрутом
- Дополнительно для UI:
  - Должны иметь расширение `.fit.zip`


### Данные активность

- Время _(обязательное значение)_
- Расстояние _(обязательное значение)_
- Скорость
- Мощность
- Пульс
- Каденс
- Круг (lap)

Не выгружается заголовок - расчёт на загрузку в Strava, где все данные заголовка всё равно расчитываются.

### Данные маршрута

- Позиция _(обязательное значение)_
- Расстояние _(обязательное значение)_
- Высота на уровнем моря

Обычно файлы маршрута содержат намного меньше точек, чем файлы с активностью, поэтому трек дополнительно
интерполируется,
расстояние между точками в интерполяции настраивается флагом `--precision` или с помощью слайдера в UI.
Значение по умолчанию - 1м.

## Выходные значения

Поддерживаемые форматы результата:

- TCX

Список выгружаемых полей можно настроить на GUI.
